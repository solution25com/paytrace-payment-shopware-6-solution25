const r=`<div> <sw-button-process :is-loading="isLoading" :process-success="isSaveSuccessful" @process-finish="saveFinish" @click="check" > {{ $tc('Paytrace.apiTest.connection') }} </sw-button-process> </div>`,{Component:o,Mixin:l}=Shopware;o.register("paytrace-api-test",{template:r,props:["label"],inject:["paytraceApiTestService"],mixins:[l.getByName("notification")],data(){return{isLoading:!1,isSaveSuccessful:!1}},computed:{pluginConfig(){let e=this.$parent;for(;e.actualConfigData===void 0;)e=e.$parent;return e.actualConfigData.null}},methods:{saveFinish(){this.isSaveSuccessful=!1},getCurrentSalesChannelId(){let e=this.$parent;for(;e.currentSalesChannelId===void 0;)e=e.$parent;return e.currentSalesChannelId},check(){this.isLoading=!0;const e={...this.pluginConfig,salesChannelId:this.getCurrentSalesChannelId()};this.paytraceApiTestService.check(e).then(t=>{t.success?(this.isSaveSuccessful=!0,this.createNotificationSuccess({title:this.$tc("Paytrace.apiTest.success.title"),message:this.$tc("Paytrace.apiTest.success.message")})):this.createNotificationError({title:this.$tc("Paytrace.apiTest.error.title"),message:this.$tc("Paytrace.apiTest.error.message")})}).catch(t=>{var s,i,a,c;this.createNotificationError({title:"Paytrace API Test",message:((c=(a=(i=(s=t.response)==null?void 0:s.data)==null?void 0:i.errors)==null?void 0:a[0])==null?void 0:c.detail)||t.message||"Connection failed!"})}).finally(()=>{this.isLoading=!1})}}});const n=Shopware.Classes.ApiService;class p extends n{constructor(t,s,i="paytrace-test-connection"){super(t,s,i)}check(t){const s=this.getBasicHeaders();return this.httpClient.post(`_action/${this.getApiBasePath()}/test-connection`,t,{headers:s}).then(i=>n.handleResponse(i))}}Shopware.Service().register("paytraceApiTestService",()=>new p(Shopware.Application.getContainer("init").httpClient,Shopware.Service("loginService")));
//# sourceMappingURL=solu1-paytrace-CBGT5uNS.js.map
