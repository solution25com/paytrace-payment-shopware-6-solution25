{"version":3,"file":"solu1-paytrace-CBGT5uNS.js","sources":["../../../app/administration/src/component/paytrace-api-test/paytrace-api-test.html.twig","../../../app/administration/src/component/paytrace-api-test/index.js","../../../app/administration/src/service/paytrace-api-test-service.js","../../../app/administration/src/main.js"],"sourcesContent":["<div>\n  <sw-button-process\n      :is-loading=\"isLoading\"\n      :process-success=\"isSaveSuccessful\"\n      @process-finish=\"saveFinish\"\n      @click=\"check\"\n  >\n    {{ $tc('Paytrace.apiTest.connection') }}\n  </sw-button-process>\n</div>","import template from './paytrace-api-test.html.twig';\n\nconst { Component, Mixin } = Shopware;\n\nComponent.register('paytrace-api-test', {\n    template,\n\n    props: ['label'],\n    inject: ['paytraceApiTestService'],\n\n    mixins: [Mixin.getByName('notification')],\n\n    data() {\n        return {\n            isLoading: false,\n            isSaveSuccessful: false,\n        };\n    },\n\n    computed: {\n        pluginConfig() {\n            let $parent = this.$parent;\n\n            while ($parent.actualConfigData === undefined) {\n                $parent = $parent.$parent;\n            }\n\n            return $parent.actualConfigData.null;\n        },\n    },\n\n    methods: {\n        saveFinish() {\n            this.isSaveSuccessful = false;\n        },\n\n        getCurrentSalesChannelId() {\n            let $parent = this.$parent;\n\n            while ($parent.currentSalesChannelId === undefined) {\n                $parent = $parent.$parent;\n            }\n\n            return $parent.currentSalesChannelId;\n        },\n\n        check() {\n            this.isLoading = true;\n\n            const payload = {\n                ...this.pluginConfig,\n                salesChannelId: this.getCurrentSalesChannelId()\n            };\n\n            this.paytraceApiTestService\n                .check(payload)\n\n                .then((response) => {\n                    if (response.success) {\n                        this.isSaveSuccessful = true;\n                        this.createNotificationSuccess({\n                            title: this.$tc('Paytrace.apiTest.success.title'),\n                            message: this.$tc('Paytrace.apiTest.success.message'),\n                        });\n                    } else {\n                        this.createNotificationError({\n                            title: this.$tc('Paytrace.apiTest.error.title'),\n                            message: this.$tc('Paytrace.apiTest.error.message'),\n                        });\n                    }\n                })\n                .catch((error) => {\n                    this.createNotificationError({\n                        title: 'Paytrace API Test',\n                        message: error.response?.data?.errors?.[0]?.detail || error.message || 'Connection failed!',\n                    });\n                })\n                .finally(() => {\n                    this.isLoading = false;\n                });\n        },\n    },\n});","const ApiService = Shopware.Classes.ApiService;\n\nexport default class PaytraceApiTestService extends ApiService {\n\n    constructor(httpClient, loginService, apiEndpoint = 'paytrace-test-connection') {\n        super(httpClient, loginService, apiEndpoint);\n    }\n    check(values) {\n        const headers = this.getBasicHeaders();\n\n        return this.httpClient\n            .post(`_action/${this.getApiBasePath()}/test-connection`, values, {\n                headers,\n            })\n            .then((response) => {\n                return ApiService.handleResponse(response);\n            });\n    }\n}","import './component/paytrace-api-test';\n\nimport PaytraceApiTestService from './service/paytrace-api-test-service';\n\nShopware.Service().register('paytraceApiTestService', () => {\n    return new PaytraceApiTestService(\n        Shopware.Application.getContainer('init').httpClient,\n        Shopware.Service('loginService')\n    );\n});"],"names":["template","Component","Mixin","$parent","payload","response","error","_a","_b","_c","_d","ApiService","PaytraceApiTestService","httpClient","loginService","apiEndpoint","values","headers"],"mappings":"AAAA,MAAAA,EAAe,0MCET,CAAE,UAAAC,EAAW,MAAAC,CAAK,EAAK,SAE7BD,EAAU,SAAS,oBAAqB,CACpC,SAAAD,EAEA,MAAO,CAAC,OAAO,EACf,OAAQ,CAAC,wBAAwB,EAEjC,OAAQ,CAACE,EAAM,UAAU,cAAc,CAAC,EAExC,MAAO,CACH,MAAO,CACH,UAAW,GACX,iBAAkB,EAC9B,CACA,EAEI,SAAU,CACN,cAAe,CACX,IAAIC,EAAU,KAAK,QAEnB,KAAOA,EAAQ,mBAAqB,QAChCA,EAAUA,EAAQ,QAGtB,OAAOA,EAAQ,iBAAiB,IAC5C,CACA,EAEI,QAAS,CACL,YAAa,CACT,KAAK,iBAAmB,EACpC,EAEQ,0BAA2B,CACvB,IAAIA,EAAU,KAAK,QAEnB,KAAOA,EAAQ,wBAA0B,QACrCA,EAAUA,EAAQ,QAGtB,OAAOA,EAAQ,qBAC3B,EAEQ,OAAQ,CACJ,KAAK,UAAY,GAEjB,MAAMC,EAAU,CACZ,GAAG,KAAK,aACR,eAAgB,KAAK,yBAAwB,CAC7D,EAEY,KAAK,uBACA,MAAMA,CAAO,EAEb,KAAMC,GAAa,CACZA,EAAS,SACT,KAAK,iBAAmB,GACxB,KAAK,0BAA0B,CAC3B,MAAO,KAAK,IAAI,gCAAgC,EAChD,QAAS,KAAK,IAAI,kCAAkC,CAChF,CAAyB,GAED,KAAK,wBAAwB,CACzB,MAAO,KAAK,IAAI,8BAA8B,EAC9C,QAAS,KAAK,IAAI,gCAAgC,CAC9E,CAAyB,CAEzB,CAAiB,EACA,MAAOC,GAAU,CDvElC,IAAAC,EAAAC,EAAAC,EAAAC,ECwEoB,KAAK,wBAAwB,CACzB,MAAO,oBACP,UAASA,GAAAD,GAAAD,GAAAD,EAAAD,EAAM,WAAN,YAAAC,EAAgB,OAAhB,YAAAC,EAAsB,SAAtB,YAAAC,EAA+B,KAA/B,YAAAC,EAAmC,SAAUJ,EAAM,SAAW,oBAC/F,CAAqB,CACrB,CAAiB,EACA,QAAQ,IAAM,CACX,KAAK,UAAY,EACrC,CAAiB,CACjB,CACA,CACA,CAAC,EClFD,MAAMK,EAAa,SAAS,QAAQ,WAErB,MAAMC,UAA+BD,CAAW,CAE3D,YAAYE,EAAYC,EAAcC,EAAc,2BAA4B,CAC5E,MAAMF,EAAYC,EAAcC,CAAW,CACnD,CACI,MAAMC,EAAQ,CACV,MAAMC,EAAU,KAAK,gBAAe,EAEpC,OAAO,KAAK,WACP,KAAK,WAAW,KAAK,eAAc,CAAE,mBAAoBD,EAAQ,CAC9D,QAAAC,CAChB,CAAa,EACA,KAAMZ,GACIM,EAAW,eAAeN,CAAQ,CAC5C,CACb,CACA,CCdA,SAAS,QAAO,EAAG,SAAS,yBAA0B,IAC3C,IAAIO,EACP,SAAS,YAAY,aAAa,MAAM,EAAE,WAC1C,SAAS,QAAQ,cAAc,CACvC,CACC"}